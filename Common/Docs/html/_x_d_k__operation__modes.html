<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Context-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>XDK API: XDK Operation Modes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
	<div id="header">
		<table class="background-img">
			<tr>
				<td class="left">
					<img src="header_left.jpg" alt="" />
				</td>
				<td class="center">
					<img src="header_center.jpg" alt="" />
				</td>
				<td class="right">
					<img src="header_right.jpg" alt="" />
				</td>
			</tr>
		</table>
	</div>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="XDK-Main-App-Icon-64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">XDK API
   &#160;<span id="projectnumber">3.6.0</span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<html><head></head><body></body></html><!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">XDK Operation Modes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Explains XDK Operation Modes, meaning of LEDs, Assertions and Stack Overflows</p>
<hr/>
<p>This page describes the different operation modes of the XDK, how to determine in which mode XDK is and how to switch between them. Please note, that in normal operation, XDK Workbench will automatically detect the mode XDK currently is in. Furthermore, XDK Workbench will try to automatically perform the mode switch that are required for its correct function. However, there may be certain situations, in which the automatic detection or the automated switching does not work.</p>
<p>In general, XDK knows the following modes: </p><ul>
<li>
Bootloader Mode </li>
<li>
Application Mode </li>
<li>
Assertion </li>
<li>
Stack Overflow </li>
</ul>
<h1><a class="anchor" id="XDK_Operation_Modes_LED_Code"></a>
LED Code</h1>
<p>XDK uses the LEDs to signal the operation mode it is currently in. Since in application mode, the application has control over the LEDs, the LED code may not necessarily be unambiguous.</p>
<table class="doxtable">
<tr>
<th>Red LED </th><th>Orange LED </th><th>Yellow LED </th><th>Macro  </th></tr>
<tr>
<td>On </td><td>Off </td><td>Off </td><td>XDK in Bootloader, USB not connected </td></tr>
<tr>
<td>On </td><td>Off </td><td>On </td><td>XDK in Bootloader, USB connected </td></tr>
<tr>
<td>Blinking </td><td>Off </td><td>Off </td><td>XDK in Bootloader, invalid application </td></tr>
<tr>
<td>Off </td><td>Off </td><td>Off </td><td>XDK in application mode (LEDs are user programmable) </td></tr>
<tr>
<td>On </td><td>On </td><td>On </td><td>XDK is in Assertion mode </td></tr>
<tr>
<td>On </td><td>Off </td><td>On </td><td>XDK is in Stack Overflow mode </td></tr>
</table>
<h1><a class="anchor" id="XDK_Operation_Modes_Bootloader"></a>
XDK Bootloader Mode</h1>
<p>XDK has a bootloader, that allows to upload XDK Applications via USB (see <a class="el" href="_x_d_k__bootloader.html">XDK Bootloader User Guide</a> for further information). The bootloader is write protected and can only be overwritten or updated using the J-Link JTAG Adapter via XDK Workbench. When powering up, XDK will automatically go into the bootloader mode, which is indicated by the red LED. If XDK finds a valid application, the bootloader will automatically turn off the red LED and start the application.</p>
<p>In case no valid application is found or XDK is forced to go into bootloader mode, the yellow LED indicates whether XDK is successfully connected to a PC. Once the red and yellow LED are solid on, XDK shows up in the device view of XDK Workbench and can be programmed.</p>
<p>To get XDK into the bootloader, XDK Workbench can be used. Right click on the XDK and select "Goto Bootloader". In case XDK is not responding (and possibly not even recognized over USB), then you can manually force XDK into bootloader mode like so (see also <a class="el" href="_x_d_k__bootloader.html#XDK_Bootloader_Engage_1">Approach 1</a>): </p><ul>
<li>
Switch off XDK </li>
<li>
Press and hold Button 1 </li>
<li>
Turn on XDK </li>
<li>
Release Button 1 as soon as red LED turns on </li>
</ul>
<h1><a class="anchor" id="XDK_Operation_Modes_Application"></a>
XDK Application Mode</h1>
<p>In application mode, the LEDs of XDK are user programmable. More information on the control flow can be found <a class="el" href="_x_d_k__s_o_f_t_w_a_r_e__s_t_a_r_t_u_p__g_u_i_d_e.html">here</a>.</p>
<h1><a class="anchor" id="XDK_Operation_Modes_Assertion"></a>
Assertion</h1>
<p><a href="https://en.wikipedia.org/wiki/Assertion_%28software_development%29">Assertions</a> are used in XDK to ensure certain conditions that must be met when calling a function or executing a given piece of code. The developer uses assertions to indicate explicit assumptions that he takes during development of the code.</p>
<p>In case one of those assumptions is violated during the execution of the application, XDK will stop and turn on all LEDs. Furthermore, the following message will be printed out on the console:</p>
<div class="fragment"><div class="line">asserted at Filename Libraries/FreeRTOS/FreeRTOS/source/queue.c, line no 599</div>
</div><!-- fragment --><p>XDK will have to be reset now, before it can be used again. Either, you simply switch it off and on again, and XDK will then execute the installed application. Or, you force it into bootloader mode (see above) to be able to install a new application onto XDK.</p>
<p>To debug an assertion, dig into the code and find the place where your program asserted. The assertion will tell you, which assumption was not fulfilled. Check your code to make sure, that all assumptions are met when calling another function.</p>
<h1><a class="anchor" id="XDK_Operation_Modes_Stack_Overflow"></a>
Stack Overflow</h1>
<p>The <a href="https://en.wikipedia.org/wiki/Call_stack">call stack</a> of a program is the memory that is allocated for holding runtime information that is mostly produced while calling functions. Each task in freeRTOS has a limited stack size. A task that exceeds its own reserved stack size corrupts the memory of other task, which will lead to unpredictable behaviour. This situation is called <a href="https://en.wikipedia.org/wiki/Stack_overflow">Stack Overflow</a> and must be avoided. XDK uses a heuristic to detect, whether a stack overflow has occurred. If this is the case, XDK will turn on the red and yellow LED and print out the following message on the console: </p><div class="fragment"><div class="line">----- STACK OVERFLOW -----Task Name: Lwm2mExampleClient -----Current Task Handle: 0xAB</div>
</div><!-- fragment --><p>XDK will have to be reset now, before it can be used again. Either, you simply switch it off and on again, XDK will then execute the installed application. Or, you force it into bootloader mode (see above) to be able to install a new application onto XDK. </p>
</div></div><!-- contents -->
	<hr size="1" />
	All rights reserved. The use is subject to the XDK SDK EULA by Bosch Connected Devices and Solutions GmbH. 
	<hr size="1" />
	<address style="align: right;">
		<small>This documentation file has been automatically generated on Thu Mar 14 2019 19:12:49 by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.8</small>
	</address>
</body>
</html>