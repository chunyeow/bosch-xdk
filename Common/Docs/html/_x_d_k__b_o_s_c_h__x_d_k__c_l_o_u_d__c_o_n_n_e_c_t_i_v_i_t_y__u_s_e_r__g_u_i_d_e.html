<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Context-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>XDK API: XDK BoschXDKCloudConnectivity Application Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
	<div id="header">
		<table class="background-img">
			<tr>
				<td class="left">
					<img src="header_left.jpg" alt="" />
				</td>
				<td class="center">
					<img src="header_center.jpg" alt="" />
				</td>
				<td class="right">
					<img src="header_right.jpg" alt="" />
				</td>
			</tr>
		</table>
	</div>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="XDK-Main-App-Icon-64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">XDK API
   &#160;<span id="projectnumber">3.6.0</span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<html><head></head><body></body></html><!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">XDK BoschXDKCloudConnectivity Application Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The XDK BoschXDKCloudConnectivity application for the XDK implements a simple client, which enables a LWM2M server to read and receive sensor data from the XDK.</p>
<hr/>
<p> Use the XDK example application <b>BoschXDKCloudConnectivity</b>.</p>
<p>To be able to use this example application , several pre-requirements must be fulfilled which are mentioned below</p>
<ul>
<li>IP connectivity via WLAN to the LWM2M server must be ensured (i.e) XDK must connect to valid Access Point and acquired dynamic IP address.</li>
<li>The XDK uses its internal standard WLAN module to communicate with the LWM2M server via UDP.</li>
<li>Please check with other proper utilities (other client, e.g. Leshan Client on a Notebook connected via WLAN), that the communication via WLAN / UDP is working. The LWM2M XDK client doesn't offer a "rich test functionality" therefore something else must be used to ensure that communication.</li>
<li>To ensure proper secured(encrypted) data communication between XDK LwM2M client and Lwm2M server,please check for the standard UDP port 5684(DTLS-secured CoAP)which ever is configured in the config.txt configuration file.</li>
</ul>
<h1><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_USAGE"></a>
1.List of configurations to be in SD card:</h1>
<p>In order to ensure XDK Bosch XDK Cloud Connectivity application proper operation user needs to supply minimum configurations via proper configuration copied into the in SD card <b>config.txt</b>, which are described below</p>
<h2><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_SUBSECTION1"></a>
1.1 Parameter to configure the WLAN adapter</h2>
<p>User needs to provide the WiFi Access point SSID and password ,via which the XDK will get connected to Lwm2m Server,in <b>config.txt</b> file. <br />
 <b>Example Settings required for connecting XDK via External Access point </b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;SSID = Your-SSID</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;PASSWORD  = Your-WPA2-PW </div>
</div><!-- fragment --><p>XDK's Wlan adapter can be configured to have various IP addressing mechanism. It can be either configured as <b>Static or Dynamic ip addressing</b>. Additional care needs to be taken care by the user in case of static IP addressing mode,in providing appropriate STATICIP ,DNSSERVER ,GATEWAY, MASK values in the <b>config.txt</b> file. By default XDK's Wlan adapter is configured for dynamic IP addressing mode</p>
<p><b>Example Settings required if Static IP addressing mode for XDK's wlan adapter </b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;STATIC=YES</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;STATICIP=192.168.1.5</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;DNSSERVER=192.168.1.1</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;GATEWAY=192.168.1.1</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;MASK=255.255.255.0</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Note: To have default Dynamic IP addressing mode the user can delete the entries STATICIP ,DNSSERVER ,GATEWAY, MASK in the <b>config.txt</b> file if it is already present and make sure "STATIC" value is NO. </p>
</blockquote>
<h2><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_SUBSECTION2"></a>
1.2 Parameter to configure the LWM2M client</h2>
<p>User needs to provide atleaset these two information regarding LWM2M default server(LWM2MDEFSRV) and LWM2M endpoint name of device (LWM2MENDPOINT). Other optional parameters like LWM2M lifetime(LWM2MLIFETIME) in seconds,and enable CON notifies (LWM2MCONNOTIFIES) for mostly all resources.</p>
<p><b>Example mandatory Settings required for configuring Lwm2m client </b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LWM2MDEFSRV = coap://leshan.eclipse.org:5683</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;LWM2MENDPOINT = MY_ENDPOINT_NAME</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>Note1: If the LWM2MENDPOINT name entry contains, #&mdash;MAC-&mdash;# , this will be expanded to the WiFi MAC. E.g. "lwm2m:#---MAC----#-1" will be expanded to "lwm2m:001122334455-1", if the MAC is 001122334455. </p>
</blockquote>
<p><br />
 <b>Example Optional Settings for configuring Lwm2m client </b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LWM2MLIFETIME = 240</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;LWM2MCONNOTIFIES = YES</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>Note: Default value for LWM2MLIFETIME is 240 seconds ,Default value for LWM2MCONNOTIFIES is NO </p>
</blockquote>
<p><br />
</p>
<h2><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_SUBSECTION3"></a>
1.3 Parameter to configure the DTLS encryption</h2>
<p>User needs to provide these mandatory information regarding LWM2M default server (LWM2MDEFSRV) , e.g coaps:// means DTLS is enabled , PSK identity(DTLSPSKIDENTITY) and PSK secret key in plain ASCII (DTLSPSKSECRETKEY). Other optional parameter like PSK secret key in hexadecimal format(DTLSPSKSECRETKEYHEX). If DTLSPSKIDENTITY value contains backslash, replace the backslash "\" (ex: xdk\123) with "\\" (ex: xdk\123).</p>
<p><b>Example mandatory Settings required for configuring the DTLS encryption </b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LWM2MDEFSRV = coaps://leshan.eclipse.org:5684 </div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;DTLSPSKIDENTITY = MY_PSK_IDENTITY_NAME</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;DTLSPSKSECRETKEY = XOMIRAREACE</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Note1: If the DTLSPSKIDENTITY name is empty or missing and say DTLS/PSK is enabled, in this case the lwm2m endpoint name is used. #&mdash;MAC-&mdash;# expanding is also supported. Additionally the token "#-LWM2M-EP-#" is expanded into the LWM2M endpoint name </p>
</blockquote>
<p><br />
 </p><blockquote class="doxtable">
<p>Note2: DTLSPSKSECRETKEY = PSK secret key. Not used, if DTLSPSKSECRETKEYHEX is provided. Plain ASCII encoded secret key. </p>
</blockquote>
<p><br />
 <b>Example Optional Settings for configuring the DTLS encryption </b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;DTLSPSKSECRETKEYHEX = AA55AA55AF</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>Note1: If PSK secret key in hexadecimal format (DTLSPSKSECRETKEYHEX) provided as optional parameter, then DTLSPSKSECRETKEY is ignored. </p>
</blockquote>
<h2><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_SUBSECTION4"></a>
1.4 Example SD configuration file content</h2>
<p><b>Example "config.txt"to communicate with Eclipse sandbox LWM2M Server without encryption</b></p>
<p>Example: "config.txt" </p><pre class="fragment">SSID = Your-SSID
PASSWORD = Your-WPA2-PW
# Eclipse sandbox LWM2M Server without encryption
LWM2MDEFSRV = coap://leshan.eclipse.org:5683
LWM2MENDPOINT = MY_ENDPOINT_NAME
</pre><p><br />
 <b>Example "config.txt" to communicate with Eclipse sandbox LWM2M Server with encryption</b> </p><pre class="fragment">SSID = Your-SSID
PASSWORD = Your-WPA2-PW
 # Eclipse sandbox LWM2M Server with encryption
LWM2MDEFSRV = coaps://leshan.eclipse.org:5684
DTLSPSKIDENTITY = MY_PSK_IDENTITY_NAME
LWM2MENDPOINT = MY_ENDPOINT_NAME
DTLSPSKSECRETKEYHEX = 01020304
</pre> <h1><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_USAGE2"></a>
2.Usage of HMI LED and Buttons:</h1>
<p>This section explains the usage of the LED's and Buttons with respect to this application</p>
<h2><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_SUBSECTION2_1"></a>
2.1 Signals of the XDK Sensor LWM2M Client</h2>
<p>The XDK offers 3 LEDs which are used to indicate the LWM2M registration state.</p>
<table class="doxtable">
<tr>
<th>LED </th><th>OFF </th><th>ON </th><th>blinking (1s/1s)  </th></tr>
<tr>
<td>Yellow </td><td>x </td><td>x </td><td>XDK is running </td></tr>
<tr>
<td>Orange </td><td>x </td><td>Device is registering with the LWM2M server </td><td>Device is updating the registration with the LWM2M server </td></tr>
<tr>
<td>Red </td><td>x </td><td>Device is not registered with the LWM2M server </td><td>Device is registering with the LWM2M server </td></tr>
</table>
<blockquote class="doxtable">
<p>Note1: All 3 LEDs are blinking: serious error occurred! Please restart the device. </p>
</blockquote>
<blockquote class="doxtable">
<p>Note2: All 3 LEDs ON: fatal error occurred! Please restart the device. </p>
</blockquote>
<h2><a class="anchor" id="XDK_SENSOR_LWM2M_APP_USER_GUIDE_SUBSECTION2_2"></a>
2.2 Buttons of the XDK Sensor LWM2M Client</h2>
<p>Button 1 has mixed functionality</p><ul>
<li>During start of device: Button-1: is used to force to go into the bootloader mode</li>
<li>During execution of XDK Sensor LWM2M Client: It is used to notify alert message to server</li>
</ul>
<p>Below table gives various combinations of button events </p><table class="doxtable">
<tr>
<th>BUTTON </th><th>PRESSED </th><th>RELEASED </th><th>MODE </th><th>SD card Entry in config.txt file </th><th>EVENT</th><th>LED STATUS  </th></tr>
<tr>
<td>Button-1 </td><td>YES </td><td>NA </td><td>TESTMODE ON </td><td>TESTMODE = YES </td><td>Pressed event with instantaneous time stamp message sent to server </td><td>RED ON </td></tr>
<tr>
<td>Button-1 </td><td>NA </td><td>YES </td><td>TESTMODE ON </td><td>TESTMODE = YES </td><td>Released event with instantaneous time stamp message sent to server</td><td>RED OFF </td></tr>
<tr>
<td>Button-1 </td><td>YES </td><td>NA </td><td>TESTMODE MIX </td><td>TESTMODE = MIX </td><td>Pressed event with instantaneous time stamp message sent to server </td><td>RED ON </td></tr>
<tr>
<td>Button-1 </td><td>NA </td><td>YES </td><td>TESTMODE MIX </td><td>TESTMODE = MIX </td><td>Released event with instantaneous time stamp message sent to server </td><td>RED OFF </td></tr>
<tr>
<td>Button-1 </td><td>YES </td><td>NA </td><td>TESTMODE OFF </td><td>TESTMODE = NO </td><td>No Message sent to server </td><td>NA </td></tr>
<tr>
<td>Button-1 </td><td>NA </td><td>YES </td><td>TESTMODE OFF </td><td>TESTMODE = NO </td><td>No Message sent to server </td><td>NA </td></tr>
<tr>
<td>Button-2 </td><td>YES </td><td>NA </td><td>TESTMODE ON </td><td>TESTMODE = YES </td><td>No Message sent to server </td><td>ORANGE OFF </td></tr>
<tr>
<td>Button-2 </td><td>NA </td><td>YES </td><td>TESTMODE ON </td><td>TESTMODE = YES </td><td>No Message sent to server </td><td>ORANGE ON </td></tr>
<tr>
<td>Button-2 </td><td>YES </td><td>NA </td><td>TESTMODE MIX </td><td>TESTMODE = MIX </td><td>No Message sent to server </td><td>ORANGE OFF </td></tr>
<tr>
<td>Button-2 </td><td>NA </td><td>YES </td><td>TESTMODE MIX </td><td>TESTMODE = MIX </td><td>No Message sent to server</td><td>ORANGE ON </td></tr>
<tr>
<td>Button-2 </td><td>YES </td><td>NA </td><td>TESTMODE OFF </td><td>TESTMODE = NO </td><td>No Message sent to server </td><td>NA </td></tr>
<tr>
<td>Button-2 </td><td>NA </td><td>YES </td><td>TESTMODE OFF </td><td>TESTMODE = NO </td><td>No Message sent to server </td><td>NA </td></tr>
<tr>
<td>Button1 &amp; Button-2 </td><td>YES </td><td>NA </td><td>TESTMODE ON </td><td>TESTMODE = YES </td><td>triggers registration / update registration </td><td>NA </td></tr>
<tr>
<td>Button1 &amp; Button-2 </td><td>YES </td><td>NA </td><td>TESTMODE MIX </td><td>TESTMODE = MIX</td><td>triggers registration / update registration </td><td>NA </td></tr>
<tr>
<td>Button1 &amp; Button-2 </td><td>YES </td><td>NA </td><td>TESTMODE OFF </td><td>TESTMODE = NO </td><td>No Message sent to server </td><td>NA </td></tr>
</table>
<blockquote class="doxtable">
<p>Note1: Please note the LED STATUs mentioned in the above table are instantaneous state values at that moment, hence the may change due to the scenarios mentioned below. </p>
</blockquote>
<blockquote class="doxtable">
<p>Scenario 1: If TESTMODE is set to ON ,Button 1 pressed long the expected behaviour is RED_LED must be ON. But since the TESTMODE is ON LED's are also got changed for various senario's like on successful registration it may be switched OFF. </p>
</blockquote>
<blockquote class="doxtable">
<p>Scenario 2: If TESTMODE is set to MIX ,Button 1 pressed long the expected behaviour is RED_LED must be ON. But at this instance if server writes to the RED_LED an value 'false' , in that case the RED_LED Will be OFF </p>
</blockquote>
<blockquote class="doxtable">
<p>Note2: If TESTMODE is set to OFF , LED's behaviour can only be controlled by the server , in this case the trigger to any buttons will not affect the LED's behaviour </p>
</blockquote>
</div></div><!-- contents -->
	<hr size="1" />
	All rights reserved. The use is subject to the XDK SDK EULA by Bosch Connected Devices and Solutions GmbH. 
	<hr size="1" />
	<address style="align: right;">
		<small>This documentation file has been automatically generated on Thu Mar 14 2019 19:12:49 by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.8</small>
	</address>
</body>
</html>