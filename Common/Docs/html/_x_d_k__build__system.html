<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Context-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>XDK API: XDK Build System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
	<div id="header">
		<table class="background-img">
			<tr>
				<td class="left">
					<img src="header_left.jpg" alt="" />
				</td>
				<td class="center">
					<img src="header_center.jpg" alt="" />
				</td>
				<td class="right">
					<img src="header_right.jpg" alt="" />
				</td>
			</tr>
		</table>
	</div>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="XDK-Main-App-Icon-64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">XDK API
   &#160;<span id="projectnumber">3.6.0</span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<html><head></head><body></body></html><!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">XDK Build System </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Explains the build system of XDK</p>
<hr/>
<p>XDK uses a <a href="https://en.wikipedia.org/wiki/Make_%28software%29">make</a>-based build system. Make is a powerful tool, that uses so-called makefiles to specify, which files are required to compile a project. The <a href="http://www.gnu.org/software/make/manual/make.html">Manual of Make</a> contains all the details that may be required to understand the behaviour and inner workings of make.</p>
<p>Each XDK application contains the "Makefile". The makefile triggers "xdk110/Common/application.mk", which contains all the common elements of the application makefiles. While the overall build system of XDK works out of the box, certain modifications to the makefile of your applications may be required as outlined in this page.</p>
<h1><a class="anchor" id="XDK_Build_System_Variables"></a>
Which variables should I touch in the Makefile?</h1>
<p>Here you see an exemplary excerpt from an XDK application makefile:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Macro to define Start-up method. change this macro to &quot;CUSTOM_STARTUP&quot; to have custom start-up.</span></div>
<div class="line">export BCDS_SYSTEM_STARTUP_METHOD = DEFAULT_STARTUP</div>
<div class="line"></div>
<div class="line">export BCDS_APP_NAME = XDK110_myExample</div>
<div class="line">export BCDS_APP_DIR = $(CURDIR)</div>
<div class="line">export BCDS_APP_SOURCE_DIR = $(BCDS_APP_DIR)/source</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Make a note the relative path for the below variable is present in  xdk110/Common/application.mk</span></div>
<div class="line">export BCDS_CFLAGS_COMMON = -DMY_DEFINE</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Make a note MY_APP_INCLUDE_DIR is the user application include directory. If there is nothing then leave empty</span></div>
<div class="line">BCDS_XDK_INCLUDES = \</div>
<div class="line">    -I $(MY_APP_INCLUDE_DIR) </div>
<div class="line"></div>
<div class="line"># By <span class="keywordflow">default</span> all the feature macros are enabled in common_feature.mk.</div>
<div class="line"># This macro is used to select the <a class="code" href="_b_l_e_s_w-_core_stack_01_release_notes_8txt.html#a5b433240fcb41ac079b679ebdc044a5c">features</a> needed by application</div>
<div class="line"># ALL    ----&gt; All the <a class="code" href="_b_l_e_s_w-_core_stack_01_release_notes_8txt.html#a5b433240fcb41ac079b679ebdc044a5c">features</a> will be enabled</div>
<div class="line"># NONE   ----&gt; All the <a class="code" href="_b_l_e_s_w-_core_stack_01_release_notes_8txt.html#a5b433240fcb41ac079b679ebdc044a5c">features</a> will be disabled</div>
<div class="line"># SELECT ----&gt; Application has to select the required <a class="code" href="_b_l_e_s_w-_core_stack_01_release_notes_8txt.html#a5b433240fcb41ac079b679ebdc044a5c">features</a></div>
<div class="line">XDK_FEATURE_SET ?=<span class="stringliteral">&#39;ALL&#39;</span></div>
<div class="line"></div>
<div class="line"># Selection of <a class="code" href="_b_l_e_s_w-_core_stack_01_release_notes_8txt.html#a5b433240fcb41ac079b679ebdc044a5c">features</a> is done in application of xdk110/Apps</div>
<div class="line"></div>
<div class="line"># Application Files :Add the Source <a class="code" href="_b_l_e_s_w-_a_l_p_w_data_exchange_01_release_notes_8txt.html#ac483df48653e4a0d787de0c45a6755b6">file</a></div>
<div class="line">BCDS_XDK_APP_SOURCE_FILES = \</div>
<div class="line">    $(BCDS_APP_SOURCE_DIR)/myExample.c</div>
</div><!-- fragment --><p>In this example, the following variables may need changing:</p>
<table class="doxtable">
<tr>
<th>Variable </th><th>Meaning  </th></tr>
<tr>
<td>XDK_FEATURE_SET </td><td>Defines selection of features need by application </td></tr>
<tr>
<td>BCDS_CFLAGS_COMMON </td><td>Defines application-specific CFLAGS (see below) </td></tr>
<tr>
<td>BCDS_APP_NAME </td><td>Defines the project name, which is used to determine the name of your executable file </td></tr>
<tr>
<td>BCDS_XDK_INCLUDES </td><td>Defines the search path' for include files (see <a class="el" href="_x_d_k__build__system.html#XDK_Build_System_Add_Source">How to add a new source file to my project?</a>) </td></tr>
<tr>
<td>BCDS_XDK_APP_SOURCE_FILES </td><td>Defines the c-files that are taken into account when compiling your project (see <a class="el" href="_x_d_k__build__system.html#XDK_Build_System_Add_Source">How to add a new source file to my project?</a>) </td></tr>
<tr>
<td>BCDS_SYSTEM_STARTUP_METHOD </td><td>Defines whether XDK uses the standard or a custom initialization routine (see <a class="el" href="_x_d_k__s_o_f_t_w_a_r_e__s_t_a_r_t_u_p__g_u_i_d_e.html">XDK Software Startup Guide</a> for detailed information) </td></tr>
</table>
<h1><a class="anchor" id="XDK_Build_System_Add_Source"></a>
How to add a new source file to my project?</h1>
<p>When adding or removing files from your project, you have to reflect this change in the Makefile. Please update the BCDS_XDK_APP_SOURCE_FILES variable to include all files that you want to compile. Furthermore, please update the BCDS_XDK_INCLUDES variable to include all path' in which include files may be residing. After adding new include path', please make sure to reflect the change in the XDK Workbench project configuration (see below).</p>
<div class="image">
<img src="XDK_Workbench_Includepath.png" alt="XDK_Workbench_Includepath.png"/>
</div>
<h1><a class="anchor" id="XDK_Build_System_Change_Cflags"></a>
How to change CFLAGS in my project?</h1>
<p><a href="https://en.wikipedia.org/wiki/CFLAGS">CFLAGS</a> are flags passed on to the compiler, that allow you to configure various things in your software and in the behaviour of the compiler. To add add specific CFLAGS for your application, please create a new line in the makefile of your project:</p>
<div class="fragment"><div class="line">BCDS_CFLAGS_COMMON = -DMY_DEFINE</div>
</div><!-- fragment --><p>In this line, you can add your own cflags.</p>
<h1><a class="anchor" id="XDK_Build_System_Rename"></a>
How to rename a project in XDK Workbench?</h1>
<p>If you rename a project in XDK workbench, the project configuration as well as the makefile have to be modified.</p>
<p>First of all, right-click your project in XDK Workbench and select "Properties". Go into the "C/C++ Build" Tab and update the "Build Directory". To do this, click on "Workspace" and select the "make" folder inside your renamed application.</p>
<div class="image">
<img src="XDK_Workbench_Build_Directory.png" alt="XDK_Workbench_Build_Directory.png"/>
</div>
<p>Now, open up the Makefile in your renamed application. You may want to modify the BCDS_APP_NAME, as it defines the name of your executable file afterwards. Furthermore, you may want to add and/or change the files listed in BCDS_XDK_APP_SOURCE_FILES. </p>
</div></div><!-- contents -->
	<hr size="1" />
	All rights reserved. The use is subject to the XDK SDK EULA by Bosch Connected Devices and Solutions GmbH. 
	<hr size="1" />
	<address style="align: right;">
		<small>This documentation file has been automatically generated on Thu Mar 14 2019 19:12:49 by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.8</small>
	</address>
</body>
</html>